# 《异步回路：ARC 联盟》  
**类型**：可交互文字游戏（单人指挥 + 多模型队友）  
**定位**：基于 GLM-5 技术报告改编的策略叙事脚本  

---

## 0. 使用方式（给主持人/运行 Agent）

你扮演“总指挥”，带领大模型联盟完成一次高风险 Agent 系统上线。

每回合流程：
1. 主持人朗读当前节点叙事与可选行动；
2. 玩家输入：`选项字母 + 是否启用队友技能`（如：`B + Claude`）；
3. 按节点规则结算属性并跳转到下一节点；
4. 达到终局条件后结算结局。

---

## 1. 队友设定（各个大模型）

> 每位队友技能每章限用 1 次（每进入新章节刷新）。

1. **GLM-5（队长）**  
   - 技能：**异步编排**  
   - 效果：本回合额外执行一次“次级行动”（只能选 A/B/C 中未选项的半效版），`稳定性 +4`，`算力预算 -1`

2. **GPT-5.2（系统架构师）**  
   - 技能：**规范锁定**  
   - 效果：本回合忽略一次“指令漂移/需求歧义”负面，额外 `证据值 +6`

3. **Claude Opus 4.5（代码审校官）**  
   - 技能：**长链审计**  
   - 效果：清除 1 层“噪声标记”，并使本回合 `稳定性 +8`

4. **Gemini 3 Pro（多模态侦察员）**  
   - 技能：**跨域搜证**  
   - 效果：`证据值 +10`，但有 50% 概率额外触发 `噪声标记 +1`

5. **DeepSeek-V3.2（稀疏注意顾问）**  
   - 技能：**稀疏加速**  
   - 效果：本回合 `算力预算 +2`，并令“长上下文行动”额外 `稳定性 +3`

6. **GLM-4.7（历史基线分析员）**  
   - 技能：**回归对照**  
   - 效果：回看上一节点并重选一次选项（保留已触发随机事件）

---

## 2. 属性与状态

- `稳定性 S`（初始 60）  
- `算力预算 C`（初始 10）  
- `证据值 E`（初始 30）  
- `进度 P`（初始 0）  
- `噪声标记 N`（初始 0）

### 失败条件（任一触发即 Bad End）
- `S <= 0`（系统崩溃）
- `C < 0`（预算透支）
- `N >= 4`（评估污染，结论失真）

### 全局加成规则
- 若本回合行动涉及“长上下文”，且已用 DeepSeek 技能：额外 `S +3`
- 若 `E >= 70`：后续所有“验证类动作”额外 `P +5`
- 若 `N >= 2`：后续所有动作额外 `S -2`

---

## 3. 世界观锚点（来自技术报告，可在旁白中引用）

- GLM-5 使用 MoE 扩展到 **744B 参数 / 40B 激活参数**，256 experts、80 层  
- 训练 token 规模达到 **28.5T**，并将上下文从 4K 逐步推到 **200K**  
- DSA 在长序列将注意力计算降低约 **1.5–2x**  
- 搜索 Agent 中，`keep-recent-k`（k=5）使性能 **55.3% -> 62.0%**  
- 分层上下文管理（阈值 T=32k）最终达到 **75.9**  
- 真实工程环境构建：**10k+** 可验证 SWE 环境（9 种语言）  
- Terminal 任务 Docker 构建准确率 **>90%**  
- 搜索任务基于 **200 万+** 网页构建知识图  
- Slide 任务 16:9 合规率 **40% -> 92%**，总体胜率 **67.5%**

---

## 4. 主线脚本（可交互节点）

---

### CH1 节点 A1：架构抉择（P+10）
你们在“模型议会”决定新一代底座：是否引入 DSA 并放大 MoE。

选项：
- **A** 坚持传统密集注意力，先求稳  
  - 结算：`S +8, C -2, E +2, P +10`
  - 跳转：A2
- **B** 引入 DSA，执行“稀疏迁移”  
  - 结算：`S +4, C +1, E +8, P +10`
  - 若 N>=1：额外 `S -3`
  - 跳转：A2
- **C** 激进扩大模型规模但不改训练范式  
  - 结算：`S -6, C -3, E +5, P +10`
  - 跳转：A2

---

### CH1 节点 A2：上下文扩展（P+10）
你要决定从 32K 到 200K 的推进策略（1T/500B/50B 三段式是否执行）。

选项：
- **A** 分阶段推进（32K→128K→200K）  
  - 结算：`S +8, C -2, E +6, P +10`
  - 跳转：A3
- **B** 一步冲到 200K  
  - 结算：`S -8, C -1, E +4, N +1, P +10`
  - 跳转：A3
- **C** 维持 128K，先补中间件  
  - 结算：`S +3, C +1, E +2, P +10`
  - 若 E<40：额外 `P -3`
  - 跳转：A3

---

### CH2 节点 A3：后训练路线（P+10）
你要排定：Reasoning RL → Agentic RL → General RL，是否加入跨阶段蒸馏。

选项：
- **A** 三阶段 RL + 跨阶段蒸馏  
  - 结算：`S +9, C -2, E +7, P +10`
  - 跳转：A4
- **B** 只做 SFT + 一轮 RL（快上线）  
  - 结算：`S -3, C +1, E -2, N +1, P +10`
  - 跳转：A4
- **C** 先 Agentic RL 再补 Reasoning RL  
  - 结算：`S -4, C -1, E +3, P +10`
  - 跳转：A4

---

### CH2 节点 A4：异步训练稳定性（P+10）
rollout 与训练彻底解耦后，出现离策略样本和环境故障噪声。

选项：
- **A** 严格过滤离策略样本 + 环境失败剔除  
  - 结算：`S +10, C -2, E +6, P +10`
  - 跳转：A5
- **B** 容忍噪声换取吞吐  
  - 结算：`S -7, C +2, E -1, N +1, P +10`
  - 跳转：A5
- **C** 使用折中阈值，分组补齐策略  
  - 结算：`S +4, C -1, E +4, P +10`
  - 跳转：A5

---

### CH3 节点 A5：环境扩张（P+10）
你们需要把“会做题”变成“会做事”：SWE + Terminal + Search 环境成型。

选项：
- **A** 优先 SWE 可验证环境（10k+、9 语言）  
  - 结算：`S +7, C -2, E +8, P +10`
  - 跳转：A6
- **B** 优先 Terminal 大规模合成（Harbor + Docker）  
  - 结算：`S +5, C -1, E +6, P +10`
  - 若 E>=50：额外 `P +4`
  - 跳转：A6
- **C** 三线同时推进  
  - 结算：`S -5, C -3, E +10, N +1, P +10`
  - 跳转：A6

---

### CH3 节点 A6：搜索 Agent 的上下文危机（P+15）
工具调用轮次爆炸，超过 100k 后准确率下滑。是否启用分层上下文管理？

选项：
- **A** keep-recent-k（k=5）  
  - 结算：`S +6, C +1, E +7, P +15`
  - 旁白：可引用“55.3%→62.0%”
  - 跳转：A7
- **B** keep-recent + Discard-all（T=32k）  
  - 结算：`S +9, C +1, E +8, P +15`
  - 旁白：可引用“最终 75.9”
  - 跳转：A7
- **C** 不做上下文治理，硬堆预算  
  - 结算：`S -10, C -3, E +2, N +1, P +15`
  - 跳转：A7

---

### CH4 节点 A7：奖励黑客攻防（P+15）
在 slide 生成训练中，模型开始“钻奖励漏洞”。你如何修补？

选项：
- **A** 三层奖励（静态标记 + 运行渲染 + 感知特征）  
  - 结算：`S +8, C -2, E +9, P +15`
  - 跳转：A8
- **B** 只保留静态规则，先提速  
  - 结算：`S -4, C +1, E -2, N +1, P +15`
  - 跳转：A8
- **C** Rejection Sampling + Mask Refinement 联合  
  - 结算：`S +7, C -1, E +8, P +15`
  - 旁白：可引用“16:9 40%→92%”
  - 跳转：A8

---

### CH4 节点 A8：终局发布（P+20）
上线前最后决议：性能、稳定、成本如何平衡？

选项：
- **A** 冲榜优先（强调 benchmark）  
  - 结算：`S -2, C -1, E +5, P +20`
  - 跳转：END
- **B** 工程优先（可复现、可运维、可迁移）  
  - 结算：`S +6, C -1, E +4, P +20`
  - 跳转：END
- **C** 双线并行 + 分级发布  
  - 结算：`S +3, C -2, E +7, P +20`
  - 若 E>=80：额外 `S +3`
  - 跳转：END

---

## 5. 结局判定

先检查失败条件（S<=0 / C<0 / N>=4）：
- 触发即 **Bad End《回路熔断》**

否则按以下区间判定：

1. **S End《Agentic Eclipse》**  
   - 条件：`P >= 95` 且 `S >= 70` 且 `E >= 75` 且 `N <= 1`
   - 文本：你率领多模型联盟完成从“会答题”到“会交付”的跃迁，系统在长程任务中保持高一致性，成为新一代开放权重标杆。

2. **A End《稳态上线》**  
   - 条件：`P >= 85` 且 `S >= 55` 且 `E >= 60`
   - 文本：系统成功发布，工程表现稳健，具备持续迭代与扩展能力。

3. **B End《纸面王者》**  
   - 条件：`P >= 75`
   - 文本：榜单表现不错，但在复杂真实任务里仍暴露协作与上下文管理缺口。

4. **C End《延后公测》**  
   - 其他情况
   - 文本：你选择暂缓发布，回炉补齐数据闭环与评估可信度。

---

## 6. 快速主持模板（可直接复制给聊天模型）

```text
你是该游戏主持人。请按以下规则运行：
1) 初始化状态：S=60,C=10,E=30,P=0,N=0；
2) 逐节点展示剧情与 A/B/C；
3) 允许玩家每章选择一次队友技能；
4) 每回合输出：状态变化、当前总状态、下一节点；
5) 若触发失败条件立即结局；
6) 到 END 后依据“结局判定”输出结局和复盘；
7) 复盘需指出：哪三次决策最关键、哪位模型队友贡献最大。
```

---

## 7. 设计者注记（可选）

本脚本把技术报告中的关键工程思想映射成了可玩机制：
- DSA -> “算力预算与长上下文收益”的权衡；
- 异步 RL -> “吞吐与稳定性冲突”；
- 上下文管理 -> “短期记忆与长期轨迹压缩”；
- 可验证环境 -> “从 benchmark 到真实任务”的迁移；
- 多模型队友 -> “能力互补而非单模通吃”。
