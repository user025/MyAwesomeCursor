# 《GLM-5：Agentic 工程远征（严格对齐 2602.15763）》
**类型**：可交互文字游戏（主持人 + 玩家 + 多模型队友）  
**对齐声明**：仅使用 `https://arxiv.org/pdf/2602.15763` 中出现的事实与术语，不引入报告外设定。

---

## 0. 证据范围（主持人必须遵守）

可引用来源：GLM-5 报告第 1~6 节及表格/图表。  
关键锚点（示例）：
- S1 Results：8 项 ARC 基准、约 20% 相比 GLM-4.7 提升、Intelligence Index 50（从 42 提升）  
- S2.1：744B 总参数 / 40B 激活，256 experts，80 layers  
- S2.3：32K(1T) -> 128K(500B) -> 200K(50B)  
- S2.1.1：DSA 在长序列注意力计算约降 1.5-2x  
- S4.2.4：keep-recent-k（k=5）55.3% -> 62.0%，HCM 最终 75.9  
- S4.2.1/4.2.2/4.2.3：10k+ SWE 环境、Terminal Docker 准确率 >90%、WKG 200 万+网页  
- S4.2.5：16:9 合规 40% -> 92%，总体人工胜率 67.5%  
- S5：7 家国产芯片生态，W4A8 + 内核融合 + 推理调度

---

## 1. 队友（各个大模型）

> 队友来自论文对比对象与历史版本。每位技能全局限用 1 次。

1. **GLM-5（主队）**  
   - 技能：`异步编排`  
   - 效果：本节点可执行 2 个选项（第二个选项按 50% 效果结算）

2. **GLM-4.7（基线对照）**  
   - 技能：`版本回看`  
   - 效果：重打上一节点，保留较优结果

3. **DeepSeek-V3.2（稀疏参考）**  
   - 技能：`稀疏预算`  
   - 效果：下一次“长上下文/注意力”相关节点的 `算力消耗 -2`

4. **Claude Opus 4.5（长程对照）**  
   - 技能：`长程验收`  
   - 效果：若当前 `长程分 >= 40`，额外 `工程分 +6`

5. **Gemini 3 Pro（评测对照）**  
   - 技能：`上下文预警`  
   - 效果：抵消一次 `噪声 +1`

6. **GPT-5.2 (xhigh)（强基准对照）**  
   - 技能：`评测仲裁`  
   - 效果：将一次失败判定改为“继续但噪声 +1”

---

## 2. 状态面板

- `研发分 R`（初始 35）
- `工程分 E`（初始 30）
- `长程分 L`（初始 30）
- `算力预算 C`（初始 12）
- `噪声 N`（初始 0）

失败条件（任一触发）：
- `C < 0`
- `N >= 4`
- `R <= 0` 或 `E <= 0` 或 `L <= 0`

---

## 3. 主线关卡（严格对齐版）

### 节点 1：目标定义（对应 S1 Results）
你们要定义第一阶段发布目标。

- **A** 同时追踪 8 项 ARC 指标（HLE/SWE/Terminal/BrowseComp/MCP-Atlas/τ²-Bench/Vending 等）  
  结算：`R +8, E +4, L +4, C -2`
- **B** 只冲静态榜单，不建真实工程闭环  
  结算：`R +6, E -3, L -2, C -1, N +1`
- **C** 只做内部体验，不做公开基准对齐  
  结算：`R +2, E +7, L +2, C -2`

---

### 节点 2：架构选择（对应 S2.1 / S2.1.1）
你需要决定是否采用 DSA + 大规模 MoE。

- **A** 采用 DSA，落地 744B/40B、256 experts、80 layers  
  结算：`R +10, E +5, L +4, C +1`
- **B** 维持密集注意力路线  
  结算：`R +4, E +1, L -2, C -4, N +1`
- **C** 保守保持旧规模（类 355B/32B 档位）  
  结算：`R +3, E +2, L -3, C +2`

---

### 节点 3：中训窗口（对应 S2.3）
上下文是否按三阶段推进？

- **A** 32K(1T) -> 128K(500B) -> 200K(50B)  
  结算：`R +6, E +3, L +10, C -2`
- **B** 停在 128K  
  结算：`R +3, E +2, L +4, C +1`
- **C** 直接冲 200K（无分阶段缓冲）  
  结算：`R +5, E +1, L +6, C -3, N +1`

---

### 节点 4：后训练管线（对应 S1 Methods / S3）
你如何排布 SFT 与 RL？

- **A** SFT -> Reasoning RL -> Agentic RL -> General RL + On-Policy Cross-Stage Distillation  
  结算：`R +9, E +8, L +6, C -2`
- **B** 不做跨阶段蒸馏  
  结算：`R +6, E +2, L -2, C -1, N +1`
- **C** 仅强化 SFT，缩减 RL  
  结算：`R +2, E -3, L -1, C +2`

---

### 节点 5：异步 RL 稳定性（对应 S4.1.2）
出现离策略样本、环境崩溃噪声、KV 复用效率问题。

- **A** 双侧 token clipping + 严格 off-policy 过滤 + 环境崩溃样本剔除  
  结算：`R +5, E +10, L +5, C -1`
- **B** 只保吞吐，不做样本清洗  
  结算：`R +2, E -6, L -4, C +2, N +1`
- **C** 上 DP-aware routing（一致性哈希保持 rollout 与 KV 局部性）  
  结算：`R +4, E +6, L +4, C +1`

---

### 节点 6：环境扩张（对应 S4.2.1 / S4.2.2 / S4.2.3）
你要优先扩张哪类可验证环境？

- **A** SWE：10k+ 可验证环境，9 语言覆盖  
  结算：`R +4, E +10, L +2, C -1`
- **B** Terminal：Harbor 任务 + Docker，构建准确率 >90%  
  结算：`R +5, E +8, L +3, C -1`
- **C** Search：WKG（200 万+网页）+ 三阶段难题过滤验证  
  结算：`R +4, E +6, L +8, C -2`

---

### 节点 7：上下文管理（对应 S4.2.4）
BrowseComp 进入长轨迹区，准确率开始下滑。

- **A** 不做管理，依赖大预算  
  结算：`R +1, E -2, L -8, C -3, N +1`
- **B** keep-recent-k（k=5，报告给出 55.3% -> 62.0%）  
  结算：`R +4, E +5, L +7, C +1`
- **C** HCM（keep-recent + Discard-all，T=32k，报告给出 75.9）  
  结算：`R +6, E +7, L +10, C +1`

---

### 节点 8：奖励黑客攻防（对应 S4.2.5）
Slide 生成出现 reward hacking（截断/留白作弊等）。

- **A** 三层奖励 + Rejection Sampling + Masking-based Refinement  
  结算：`R +7, E +9, L +4, C -1`
- **B** 只做静态规则层  
  结算：`R +3, E -2, L +1, C +1, N +1`
- **C** 仅做 Rejection Sampling，不做 masking 修复  
  结算：`R +5, E +4, L +2, C -1`

---

### 节点 9：国产芯片落地（对应 S5）
最终发布前，是否推进中国芯片全栈适配？

- **A** W4A8 + 内核融合 + 推理调度三件套全上  
  结算：`R +6, E +8, L +3, C +2`
- **B** 只做量化，不做内核与引擎协同  
  结算：`R +3, E +2, L +1, C +1, N +1`
- **C** 延后适配，先跑国际硬件  
  结算：`R +2, E +1, L +1, C -2`

---

## 4. 结局判定

先判失败条件（`C<0` 或 `N>=4` 或任一主分 <=0）：  
- **Bad End《回归到 Vibe Coding》**

否则计算总分：
- `总分 = R + E + L + 2*C - 8*N`

并附加“关键技术达成”检查（是否选过：节点2A、节点7B/7C、节点8A）：

1. **S End《Agentic Engineering 成形》**  
   - 条件：`总分 >= 190` 且关键技术达成全部满足  

2. **A End《可发布工程体》**  
   - 条件：`总分 >= 160`

3. **B End《榜单可见，工程待补》**  
   - 条件：`总分 >= 130`

4. **C End《继续迭代》**  
   - 其余情况

---

## 5. 主持人输出格式（建议）

每回合固定输出：
1. `剧情摘录（对应章节）`
2. `玩家选择 + 队友技能`
3. `属性变化`
4. `当前状态：R/E/L/C/N`
5. `报告事实卡（1条）`

---

## 6. 一键开局提示词

```text
你是《GLM-5：Agentic 工程远征》的主持人。
严格规则：
1) 只使用 arXiv:2602.15763 的事实，不补充报告外数据；
2) 初始化 R=35,E=30,L=30,C=12,N=0；
3) 按节点1到节点9依次推进，每轮提供 A/B/C；
4) 允许玩家声明是否使用一个队友技能（每位仅1次）；
5) 每轮输出“章节依据（如 S4.2.4）+ 状态变化”；
6) 触发失败条件即立即结局；
7) 最终给出结局、总分、以及“哪三个决策最影响结果”。
```
